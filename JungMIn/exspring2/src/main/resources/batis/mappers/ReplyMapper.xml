<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.exam.myapp.reply.ReplyDao">	
	
  <select id="selectReplyList" resultType="ReplyVo">
    SELECT rep_no, rep_content, rep_writer, rep_reg_date, rep_bbs_no
    FROM reply
    WHERE rep_bbs_no = #{repBbsNo} 
 	ORDER BY rep_reg_date
  </select>
  
  <insert id="insertReply">
  	<!-- INSERT 문을 실행하기 전("BEFORE")에 selectKey의 SELECT 문을 실행하고
  		 그 결과를 INT 타입 값으로 받아서
  		 파라미터(BbsVo객체)의 bbsNo 속성에 저장 -->
  	<selectKey keyProperty="repNo" order="BEFORE" resultType="int">
  		SELECT rep_seq.NEXTVAL FROM DUAL
  	</selectKey>
  	insert INTO reply (rep_no, rep_content, rep_writer, rep_bbs_no)
	values ( rep_seq.NEXTVAL, #{repContent}, #{repWriter}, #{repBbsNo})
  </insert>
  
  <delete id="deleteReply">
  	DELETE FROM reply WHERE rep_no = #{repNo} and rep_writer=#{repWriter}
  </delete>

 <!--
  <select id="selectAttach" resultType="AttachVo">
    SELECT att_no, att_org_name, att_new_name, att_bbs_no 
    FROM attach
    WHERE att_no = #{attNo} 
  </select>  -->
  
</mapper>



